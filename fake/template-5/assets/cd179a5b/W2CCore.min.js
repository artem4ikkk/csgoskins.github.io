"use strict";function initRangeSelect(){$("#ex1").slider({tooltip:"always"})}function initKnobDial(){$(".dial").knob({readOnly:!0,width:125,height:125,displayInput:!1,fgColor:"#ff1e00",bgColor:"#ffffff",thickness:".05"})}function initExperienceDial(){$(".experience-input").knob({readOnly:!0,width:200,height:200,displayInput:!1,fgColor:"#5f29b2",bgColor:"#392e45",thickness:".15"})}function matchHeight(){$(".progress-item, .roulette-item, .csgo-item, .winners-item, .about-item, .money-item, .inventory-item, .games-item, .small-gun-item").matchHeight()}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},BalancePage=function(e){function t(e){jQuery.ajax({url:o.urlToLog,method:"POST",dataType:"json",data:{_csrf:LandingCore.getCsrfToken(),error:"Ошибка: TransactionID: "+o.trid+"; Name: "+e.name+"; Message: "+e.message+"; Stack: "+e.stack}})}var o=$.extend(!0,{paymentWays:[],urlToPay:"",urlFreeKassaWait:"",urlToLog:"",trid:"",promoCodeCheckUrl:"",promotionalCodeType:""},e),n={form:"#balance-form",paymentWay:".paymentWay",paymentWayId:"#paymentWayId",paymentSystem:"#paymentSystem",paymentWayName:".paymentWayName",paymentWayCaption:".paymentWayCaption",balanceSum:"#balance-sum",toPay:".to-pay",listErrors:"#list-errors",payButton:".pay-btn",promoCodeButton:".promo-code-btn",checkPromoCode:"#promo-code-hash-check",valuePromoCode:"#promo-code-hash",promoCodeBlock:".promo-code-block",promoCodeMessage:".promo-code-message",isCalculate:"#is-calculate",hiddenForm:"#hidden-form",needPhone:"#need-phone",modalPhone:"#modal-phone",intlTel:"#intl-tel",phoneForm:"#phone-form",continuePhone:"#continue-phone",phoneNumber:"#phone-number",phoneErrorBox:"#phone-error-box",phoneErrorLabelContainer:"#phone-error-holder",payVia:"#pay-via",systemNotFound:"#system-not-found",balancePills:"#balance-pills",offlineModal:"#offline-modal"},i=$(n.paymentSystem),a=$(n.paymentWay),r=$(n.paymentWayId),s=$(n.intlTel),l=LandingCore.delay();try{var c={show:function(e){$(n.paymentWayName).html(e)},hide:function(){$(n.paymentWayName).html("")}}}catch(e){t(e)}try{var d={show:function(e,t){var o=LandingCore.t('<span class="toPayColored">К оплате:</span> {sum} {currency}',{sum:e,currency:t});$(n.toPay).removeClass("invisible").html(o)},showSpinner:function(){$(n.toPay).removeClass("invisible").html(LandingCore.t('<span class="toPayColored">К оплате:</span> {text}',{text:'<i class="fa fa-spinner fa-spin"></i>'}))},hide:function(){$(n.toPay).html("").addClass("invisible")}}}catch(e){t(e)}try{var u={show:function(){$(n.payButton).removeClass("invisible"),$(n.promoCodeButton).removeClass("invisible")},hide:function(){$(n.payButton).addClass("invisible"),$(n.promoCodeButton).addClass("invisible")}}}catch(e){t(e)}try{var p={create:function(e){if(a.empty(),void 0===o.paymentWays[e])return this.hideAll(),!1;var t=o.paymentWays[e].ways;if(void 0===t||!t.length)return this.hideAll(),!1;1==t.length?(c.show(t[0].title),this.hide()):(c.hide(),this.show()),$(n.paymentWayCaption).removeClass("invisible"),t.forEach(function(e,t,o){$("<option></option>").attr({label:e.title,value:e.id}).appendTo(a)}),r.val(t[0].id)},show:function(e){a.removeClass("hidden")},hide:function(){a.addClass("hidden")},hideAll:function(){c.hide(),this.hide(),$(n.paymentWayCaption).addClass("invisible")}}}catch(e){t(e)}try{var h={fill:function(e){$(n.listErrors).html(e)},clean:function(){$(n.listErrors).html("")}}}catch(e){t(e)}try{var m={block:function(){$(n.continuePhone).addClass("disabled"),$(n.continuePhone).prop("disabled",!0)},unblock:function(){$(n.continuePhone).removeClass("disabled"),$(n.continuePhone).prop("disabled",!1)}}}catch(e){t(e)}try{var f={isInit:!1,init:function(){this.isInit||(s.intlTelInput({separateDialCode:!0,utilsScript:o.intlTelUtilsScript,preferredCountries:["ru","ua","kz","by"],nationalMode:!1}),this.isInit=!0,this.initValidators())},initValidators:function(){jQuery.validator.addMethod("checkPhone",function(e,t){if(s.intlTelInput("isValidNumber")){if(/^(91|994|82|372|375|374|44|998|972|66|90|81|1|507|7|77|380|371|370|996|9955|992|373|84)[0-9]{6,14}$/.test(s.intlTelInput("getNumber").replace("+","")))return!0}return!1}),$(n.phoneForm).validate({rules:{"box-phone-number":{required:!0,checkPhone:!0}},messages:{"box-phone-number":{required:LandingCore.t("Необходимо указать номер телефона"),checkPhone:LandingCore.t("Номер телефона указан не верно")}},submitHandler:function(e){var t=s.intlTelInput("getNumber"),i=$(n.form),a=i.find(n.paymentSystem).val(),r=!1;if(void 0!==o.paymentWays[a]){var l=o.paymentWays[a].ways;for(var c in l)if(2==l[c].id||62==l[c].id){r=!0;break}}return t=r||"+7"!=t.substring(0,2)?t.replace("+",""):t.substring(2),$(n.phoneNumber).val(t),$(n.payButton).eq(0).trigger("click"),!1},success:function(e){m.unblock()},showErrors:function(e,t){m.block(),this.defaultShowErrors()},errorElement:"span",errorContainer:n.phoneErrorBox,errorLabelContainer:n.phoneErrorLabelContainer})}}}catch(e){t(e)}try{var y={modal:null,attachedEvents:!1,_init:function(){this.modal||(this.modal=$(n.modalPhone))},show:function(){return this._init(),this.modal.modal("show"),f.init(),this.attachedEvents||(this.attachEvents(),this.attachedEvents=!0),this.modal},setTitle:function(e){this._init(),this.modal.find(n.payVia).html(LandingCore.t("Оплата через {via}",{via:e}))},attachEvents:function(){this._init(),this.modal.on("hide.bs.modal",function(){$(n.phoneErrorLabelContainer).html("").css("display","none"),s.val(""),m.unblock(),$(n.phoneNumber).val("")})}}}catch(e){t(e)}try{var v={modal:null,attachedEvents:!1,_init:function(){this.modal||(this.modal=$(n.offlineModal))},show:function(){return this._init(),this.modal.modal("show"),this.attachedEvents||(this.attachEvents(),this.attachedEvents=!0),this.modal},setContent:function(e){this._init(),this.modal.find(".modal-body").html(e)},attachEvents:function(){this._init();var e=this;this.modal.on("hidden.bs.modal",function(){e.modal.find(".modal-body").html("")})}}}catch(e){t(e)}try{var g={$itemsGrid:null,init:function(){this.$itemsGrid||(this.$itemsGrid=$(".items-holder"));var e=this;this.attacheHandlers(),this.$itemsGrid.imagesLoaded(function(){e.$itemsGrid.isotope({itemSelector:".item",layoutMode:"fitRows",filter:"*"}),$(n.balancePills+" li a").eq(0).trigger("click")}),this.$itemsGrid.css("visibility","visible").hide().fadeIn("slow")},attacheHandlers:function(){var e=this;$('a[data-toggle="tab"]').on("shown.bs.tab",function(t){var o=$(t.target).attr("data-filter"),n='[data-category~="'+o+'"]';"*"==o&&(n="*"),e.$itemsGrid.isotope({filter:n}),e.checkResults()})},checkResults:function(){var e=this.$itemsGrid.data("isotope").filteredItems.length,t=$(n.systemNotFound);e>0?t.addClass("hidden"):t.removeClass("hidden")}}}catch(e){t(e)}g.init(),$("body").on("submit",n.form,function(){return!1}).on("click",".item .item-inner",function(e){e.preventDefault();try{if($(this).hasClass("active"))return!1;$(".item .item-inner").removeClass("active"),$(this).addClass("active");var a=$(this).data("p-sys");i.val(a),p.create(a),void 0!==o.paymentWays[a]&&$(n.needPhone).val(o.paymentWays[a].needPhone),$(n.balanceSum).trigger("keyup")}catch(e){t(e)}}).on("change",n.paymentWay,function(e){try{$(n.paymentWay).not($(this)).val($(this).val()),r.val($(this).val()),$(n.balanceSum).trigger("keyup")}catch(e){t(e)}}).on("click",n.promoCodeButton,function(e){$(this).toggleClass("hidden"),$(this).next().toggleClass("hidden")}).on("click",n.checkPromoCode,function(e){e.preventDefault(),""!=o.promoCodeCheckUrl&&$.ajax({url:o.promoCodeCheckUrl,method:"POST",dataType:"json",data:{_csrf:LandingCore.getCsrfToken(),hash:$(n.valuePromoCode).val(),promotionalCodeType:o.promotionalCodeType},success:function(e){"ok"==e.status?($(n.payButton).attr("data-promo-code-id",e.promoCodeId),$(n.promoCodeMessage).text(e.userMessage)):new PNotify({title:LandingCore.t("Ошибка"),text:e.msg,icon:"",type:"error",delay:8e3})}})}).on("keyup",n.balanceSum,function(e){try{var i=$(this);h.clean();var a=function(){$(n.form).find(n.isCalculate).val(1);var e=$(n.form),t=i.val(),a=e.find(n.paymentSystem).val(),s=e.find(n.paymentWay).val();if(!t||!a||!s)return d.hide(),u.hide(),!1;$.ajax({url:o.urlToPay,method:"POST",dataType:"json",data:{form:e.serialize()},beforeSend:function(){d.showSpinner()},success:function(e){"ok"==e.status?(null==e.sum?d.hide():d.show(e.sum,e.currency),u.show(),r.val(s)):(d.hide(),u.hide(),h.fill(e.msg))},error:function(){d.hide(),u.hide()}})};void 0!==e.originalEvent?l(a,300):a()}catch(e){t(e)}}).on("click",n.payButton,function(e){e.preventDefault();try{if($(n.form).find(n.isCalculate).val(0),1==$(n.needPhone).val()){if(!$(n.phoneNumber).val()){var i=$(n.paymentSystem).val();return void 0!==o.paymentWays[i]&&y.setTitle(o.paymentWays[i].systemName),y.show(),!1}}var a=$(n.form),i=$(n.paymentSystem).val(),s=!1,l=null;void 0!==o.paymentWays[i]&&o.paymentWays[i].ways.forEach(function(e,t,o){e.id==r.val()&&(s=e.isFreeKassa)}),s&&(l=window.open(o.urlFreeKassaWait,"_blank")),$.ajax({url:o.urlToPay,method:"POST",dataType:"json",data:{form:a.serialize(),promoCodeId:$(this).attr("data-promo-code-id")},beforeSend:function(){LandingCore.preloader.show()},success:function(e){if("ok"==e.status&&void 0!==e.freekassaurl)return l.location.href=e.freekassaurl,LandingCore.preloader.hide(),!1;if("ok"==e.status&&e.offlineResponse)v.setContent(e.offlineResponse),v.show(),$(n.modalPhone).modal("hide");else if("ok"==e.status&&e.form){$(n.hiddenForm).html(e.form);var t=$(n.hiddenForm).find("form").get(0);void 0!==t&&t.submit()}else h.fill(e.msg);LandingCore.preloader.hide()},error:function(){s&&window.top.close(),LandingCore.preloader.hide()}})}catch(e){t(e)}});try{$(".item-inner.active").length||$(".item-inner").eq(0).trigger("click")}catch(e){t(e)}},EarnBonusPage=function(e){var t=$.extend(!0,{diff:0,bonusPerHashes:0,alreadyEarnBonus:0,alreadyEarnTotalBonus:0,settings:{url:"",uid:0,sId:0}},e),o={startBtn:"#start-btn",stopBtn:"#stop-btn",statistic:{jobs:"#jobs",accepted:"#accepted",hashes:"#hashes",hashRate:"#hash-rate",earnBonus:"#earn-bonus",allEarnBonus:"#all-earn-bonus"}},n=$.Deferred(),i=$("body"),a={loaded:!1,started:!1,stopped:!0,object:null,interval:null,loadScript:function(){if(1==this.loaded)return n.resolve(),n;var e=document.createElement("script");return e.setAttribute("src",t.settings.url),e.type="text/javascript",e.async=!0,e.onload=function(){n.resolve()},e.onerror=function(){},document.getElementsByTagName("head")[0].appendChild(e),this.loaded=!0,n},start:function(){return!this.started&&(r.clearAll(),this.object=new CoinCube.User(t.settings.sId,t.settings.uid,{throttle:.2}),this.object.start(CoinCube.IF_EXCLUSIVE_TAB),setTimeout(this.startInterval,500,this),this.attachEvents(),this.started=!0,!0)},stop:function(){return!!this.started&&(this.object.stop(),this.started=!1,this.removeInterval(),!0)},startInterval:function(e){e.interval=setInterval(function(){r.setHashes(e.object.getTotalHashes()),r.setHashRate(e.object.getHashesPerSecond().toFixed(2))},1e3)},removeInterval:function(){clearInterval(this.interval),this.interval=null},attachEvents:function(){this.object.on("job",this.onJob),this.object.on("accepted",this.onAccepted)},onJob:function(){r.updateJobs()},onAccepted:function(){r.updateAccepted(),r.updateEarnBonus()}},r={updateJobs:function(){var e=parseInt($(o.statistic.jobs).text())+1;this.set(e,o.statistic.jobs)},updateAccepted:function(){var e=parseInt($(o.statistic.accepted).text())+1;this.set(e,o.statistic.accepted)},updateEarnBonus:function(){var e=parseFloat($(o.statistic.accepted).text()),n=0,i=0;e>0&&(i=t.diff*e/t.bonusPerHashes,n=parseFloat(i)+parseFloat(t.alreadyEarnBonus)),this.set(parseFloat(n).toFixed(2),o.statistic.earnBonus),this.set((i+t.alreadyEarnTotalBonus).toFixed(2),o.statistic.allEarnBonus)},setHashes:function(e){this.set(e,o.statistic.hashes)},setHashRate:function(e){this.set(e,o.statistic.hashRate)},set:function(e,t){$(t).text(e)},clearAll:function(){this.set(0,o.statistic.jobs),this.set(0,o.statistic.accepted),this.set(0,o.statistic.hashes),this.set(0,o.statistic.hashRate)}};a.loadScript().then(function(){$(o.startBtn).removeClass("disabled")}),i.on("click",o.startBtn+":not(.disabled)",function(e){e.preventDefault(),a.start(),$(this).addClass("disabled"),$(this).addClass("hidden"),$(o.stopBtn).removeClass("disabled"),$(o.stopBtn).removeClass("hidden")}).on("click",o.stopBtn+":not(.disabled)",function(e){e.preventDefault(),a.stop(),$(this).addClass("disabled"),$(this).addClass("hidden"),$(o.startBtn).removeClass("disabled"),$(o.startBtn).removeClass("hidden")})},LandingAchievements=function(e){$("body").on("change","#achievement-filter-form select",function(e){$(this).closest("form").submit()}),$("#achievement-filters").on("pjax:end",function(e){e.preventDefault(),$.pjax.reload({container:"#achievement-list"})}),$("#achievement-list").on("pjax:end",function(e){e.preventDefault(),initKnobDial()})},LandingAchievementsPreview=function(e){var t=window.location.pathname;$("body").on("change","#achievement-filter-form select",function(e){e.preventDefault(),$("#selected-achievements-filters #type").remove(),$("<input>").attr({type:"hidden",name:"AchievementSearch[filterAchievementType]",id:"type",value:$(this).val()}).appendTo("#selected-achievements-filters");var o=t+"?"+$("#selected-achievements-filters").serialize();history.replaceState(null,null,o),$.get(o,function(e){$(".progress-items").html($(e).find(".progress-items").html()),initKnobDial()})}).on("click","a.show-full-group",function(e){e.preventDefault();var t=$(this).attr("id");$(this).hide(),$("#"+t+"-preview").toggleClass("hidden"),$("#"+t+"-full").toggleClass("hidden")})},LandingCase=function(e){function t(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function o(){for(var t=[],o=0;o<e.items.length;o++)t.push({id:o,name:e.items[o].name,img:e.items[o].image,rarity:e.items[o].rarity});return t}function n(e){for(var t in u){var o=u[t],n=$("<"+o.tag+">",{html:o.label}).attr(o.attributes);n.bind("click",o.callbackArguments,o.action.bind(e)),"buy-and-put"==t&&0==$("#a-put").size()?n.prependTo(o.prependTo):"buy"==t&&0==$("#play").size()?n.prependTo(o.prependTo):"buy-bonuses"==t&&0==$("#play-bonuses").size()&&n.prependTo(o.prependTo)}}function i(e){e<=1024?$(r.upsaleDropdowns).addClass("mobile"):$(r.upsaleDropdowns).removeClass("mobile")}function a(){var e=this.value-1;$(r.upsale).parent("div").find("ul li").each(function(t){if($(this).attr("data-original-index")==e||$(this).hasClass("selected")){var o=$(this).find("i");o.hasClass("fa-square-o")?(o.removeClass("fa-square-o"),o.addClass("fa-check-square-o")):$(this).hasClass("selected")||(o.removeClass("fa-check-square-o"),o.addClass("fa-square-o"))}}),$(r.upsale).parent("div").find("button i").each(function(e){$(this).removeClass("fa-square-o"),$(this).addClass("fa-check-square-o")})}e=$.extend(!0,{items:[],caseSlug:"",caseId:"",balance:[],cost:[],fullCostRub:[],fullCostBonus:[],position:[],balancePage:"",openAction:"",buyAction:"",openUrl:"",boughtUrl:"",saleItemId:null,isBoughtCase:!1,promoCodeCheckUrl:"",promotionalCodeType:"",promotionalCodeSubType:"",promoCodeSubTypes:[],upsales:{},deselectUpsales:!0,prices:{basePrice:0,baseBonusPrice:0,promoPrice:0,promoBonusPrice:0,bonusCourse:0,newPrice:0,newBonusPrice:0,addedPrice:0,addedBonus:0}},e);var r={payType:"#pay-type",spinner:"#spinner",promoCodeButton:".promo-code-btn",promoCodeMessage:".promo-code-message",checkPromoCode:"#promo-code-hash-check",valuePromoCode:"#promo-code-hash",promoCodeBlock:".case-promo-code-block",openCaseButton:"#open-case-button",payTypeSelect:"#pay-type",caseResetPromo:".case-reset-promo",upsalesWrapper:"#upsales-wrapper",upsaleBlock:".case-upsale",upsaleDropdowns:"#upsale-dropdowns",upsaleFixedItemBlock:"#fixed-item-block",upsalePercents:"#upsale-percents",upsale:"#upsale",upsaleFixed:"#upsale-fixed",addSumBlock:".add-sum-block",openUpsale:"#open-upsale",upsalesAddedSum:".added-sum",playBonuses:"#play-bonuses",winLineWrapper:"#wrapper",inventoryItem:".inventory-item"},s={buyAction:!1,checkAction:!1},l=function(t,o,n){if(t.preventDefault(),"buyActionforBonuses"==o?$(r.payType).val("ppb"):"buyActionForMoney"==o&&$(r.payType).val("RUB"),s.buyAction)return!1;s.buyAction=!0;var i=$(r.upsale).val(),a=void 0,l=void 0;null!=i&&0!=i.length&&1==$(r.openUpsale).hasClass("active")?(a=$(r.upsalePercents).val(),l=$(r.upsaleFixed).val()):i=void 0;var c=null,d=t.data,u=$(r.payType).val(),p={caseSlug:e.caseSlug,_csrf:LandingCore.getCsrfToken(),promoCodeId:$(r.openCaseButton).attr("data-promo-code-id"),upsaleIDs:i,upsalePercent:a,certainCase:l};if(e.isBoughtCase?c=e.openAction:(c=e.buyAction,p.buyType=d.buyType,p.payType=u),"buy"==d.buyType){new SmoothScroll(null,{speed:1e3}).animateScroll(document.querySelector("#case-title"))}$.ajax({url:c,dataType:"json",method:"POST",data:p,success:function(t){if("ok"!=t.status)return new PNotify({title:LandingCore.t("Сообщение"),text:t.msg,icon:"",type:"success",delay:8e3}),s.buyAction=!1,!1;if("buy"==d.buyType){var o=$(".roulette-item"),i=n.getRandomElement(),a=i.position,l=i.winnerCase;if(l=$(o[e.position]),l.find("img").attr("src",t.image),l.attr("data-id",t.id),l.attr("data-name",t.name),l.find("h5").text(t.name),void 0!==t.fakeImage&&void 0!==t.fakeName){var c=Math.random()<.5?e.position+1:e.position-1,u=$(o[c]);u.find("img").attr("src",t.fakeImage),u.find("h5").text(t.fakeName)}$(r.openCaseButton).remove(),$(r.upsaleBlock).remove(),$(r.promoCodeBlock).remove(),$(r.winLineWrapper).removeClass("animate-win-line"),$(r.winLineWrapper).css("left","0"),$(r.winLineWrapper).css({transition:"transform 10s cubic-bezier(0.32, 0.64, 0.45, 1)",transform:"translate3d(-"+a+"px, 0px, 0px)"}),setTimeout(function(){l.siblings().fadeOut(),l.css({transition:"transform 1s ease",transform:"scale(1.1)"}),n.root.trigger("animationFinished",{buyType:d.buyType,buyID:t.id})},10500)}else"buy-and-put"==d.buyType&&n.root.trigger("animationFinished",{buyType:d.buyType,buyID:t.id});s.buyAction=!1},error:function(e,t,o){s.buyAction=!1,new PNotify({title:LandingCore.t("Ошибка"),text:LandingCore.t("Что-то пошло не так"),icon:"",type:"success",delay:8e3})}})},c=function(e){e.preventDefault(),l(e,"buyActionforBonuses",this)},d=function(e){e.preventDefault(),l(e,"buyActionForMoney",this)},u={};null!=e.balance&&(e.isBoughtCase?u.buy={label:LandingCore.t("Открыть"),tag:"button",attributes:{id:"open",class:"button open-case-button"},prependTo:r.openCaseButton,callbackArguments:{buyType:"buy"},action:d}:(u["buy-bonuses"]={label:LandingCore.t("Купить кейс за {cost}",{cost:e.fullCostBonus}),tag:"button",attributes:{id:"play-bonuses",class:"button open-case-button"},prependTo:r.openCaseButton,callbackArguments:{buyType:"buy"},action:c},u.buy={label:LandingCore.t("Купить кейс за {cost}",{cost:e.fullCostRub}),tag:"button",attributes:{id:"play",class:"button open-case-button"},prependTo:r.openCaseButton,callbackArguments:{buyType:"buy"},action:d})),$(window).load(function(){$(r.winLineWrapper).addClass("animate-win-line")});var p=function(){function i(e){this.root=$("#"+e.root),this.caseList=o(),this.init()}return i.prototype.init=function(){if(this.setup(),this.createCaseElements(),e.promoCodeSubTypes.discount==e.promotionalCodeSubType){n(this)}},i.prototype.getMiddle=function(){return this.root.width()/2},i.prototype.getRandomElement=function(){var o,n,i;return o=$(".roulette-item"),n=$(o[e.position]),i=this.getRouletteWinnerPosition(n.attr("data-id")),i=t(i,i+this.caseItemWidth),{winnerCase:n,position:i}},i.prototype.getRouletteWinnerPosition=function(e){var t=$("#wrapper").width();return(this.caseItemWidth+20)*e+10-t/2},i.prototype.detectWidthAndHeight=function(){return{width:$(window).width(),height:$(window).height()}},i.prototype.setup=function(){this.caseItemWidth=193},i.prototype.createCaseElements=function(){if(this.caseList.length>0){for(var e=0,t=$("#app").find("#spinner"),o=$("<div>").attr("id","wrapper"),n=0;n<this.caseList.length;n++){var i=$("<div>").addClass("roulette-item").css({width:this.caseItemWidth+"px",left:e+"px"}).attr("data-id",""+this.caseList[n].id).attr("data-name",""+this.caseList[n].name).append('<div class="roulette-img"><img src="'+this.caseList[n].img+'" alt="alt"></div>');i.append('<h5 class="'+this.caseList[n].rarity+'">'+this.caseList[n].name+"</h5>"),e+=this.caseItemWidth,i.appendTo(o)}o.appendTo(t)}},i.prototype.getWinner=function(e){},i.prototype.getCaseData=function(e){},i.prototype.checkUserBalance=function(e){},i.prototype.play=function(){throw new Error(LandingCore.t("Внедрите этот метод, пожалуйста"))},i}(),h=new p({root:"app"}),m=$("body");h.root.on("animationFinished",function(t,o){var n=window.location.origin,i="";"buy"==o.buyType?i=e.openUrl.replace(/%s/,o.buyID):"buy-and-put"==o.buyType&&(i=e.boughtUrl.replace(/%s/,o.buyID)),$(location).attr("href",n+i)}),m.on("click",r.promoCodeButton,function(e){$(this).toggleClass("hidden"),$(this).next().toggleClass("hidden")}).on("click",r.checkPromoCode,function(t){if(t.preventDefault(),s.checkAction)return!1;""!=e.promoCodeCheckUrl&&""!=$(r.valuePromoCode).val()&&(e.promoCodeSubTypes.onlyPromoCode==e.promotionalCodeSubType&&($(r.upsalesWrapper).addClass("hidden"),$("#buy-and-put-wrapper").empty(),$("#play").remove()),s.checkAction=!0,$.ajax({url:e.promoCodeCheckUrl,method:"POST",dataType:"json",data:{_csrf:LandingCore.getCsrfToken(),hash:$(r.valuePromoCode).val(),promotionalCodeType:e.promotionalCodeType,promotionalCodeSubType:e.promotionalCodeSubType,data:{case_id:e.caseId}},success:function(t){"ok"==t.status?($(r.openCaseButton).attr("data-promo-code-id",t.promoCodeId),t.userMessage&&$(r.promoCodeMessage).text(t.userMessage),f.newPrice(t.discountPrice),f.newBonusPrice(t.bonusRawPrice),f.promoPrice(t.discountPrice),f.promoBonusPrice(t.bonusRawPrice),g(),e.promoCodeSubTypes.onlyPromoCode==e.promotionalCodeSubType&&(n(h),$(r.upsalesWrapper).removeClass("hidden"))):new PNotify({title:LandingCore.t("Ошибка"),text:t.msg,icon:"",type:"error",delay:8e3}),s.checkAction=!1},error:function(e,t,o){s.checkAction=!1,new PNotify({title:LandingCore.t("Ошибка"),text:LandingCore.t("Что-то пошло не так"),icon:"",type:"success",delay:8e3})}}))}).on("change",r.valuePromoCode,function(){$(this).val()||($(r.openCaseButton).removeAttr("data-promo-code-id"),$(r.promoCodeMessage).text(""),f.promoPrice(0),f.promoBonusPrice(0),g())}),m.on("click",r.openUpsale,function(e){e.preventDefault(),$(this).toggleClass("active"),$(r.addSumBlock).toggleClass("hidden"),$(r.upsaleBlock).find(r.upsaleDropdowns).toggleClass("hidden"),$(r.upsalesAddedSum).toggleClass("hidden"),$(this).hasClass("active")?(y($(r.upsalePercents),!1),y($(r.upsale),!1),$(r.upsalePercents+" :nth-child(1)").prop("selected",!0).trigger("change"),$(r.upsale+" :nth-child(1)").prop("selected",!0).trigger("change")):(y($(r.upsalePercents),!0),y($(r.upsale),!0),g())}),m.on("click",r.inventoryItem,function(e){var t=$(this).attr("data-id");if(t){var o=null;$(r.upsale+" option").each(function(e,t){1==$(t).attr("data-fixed-item")&&(o=$(t).val())});var n=[];$(r.upsale+" option").each(function(e,t){n.push(parseInt($(t).val()))}),null!=n&&0!=n.length&&null!=o&&(n=Math.max.apply(null,n),y($(r.upsalePercents),!1),y($(r.upsale),!1),$(r.openUpsale).addClass("active"),$(r.addSumBlock).removeClass("hidden"),$(r.upsaleBlock).find(r.upsaleDropdowns).removeClass("hidden"),$(r.upsalesAddedSum).removeClass("hidden"),$(r.upsalePercents+" [value=30]").prop("selected","true").trigger("change"),$(r.upsalePercents).selectpicker("refresh"),$(r.upsale+" [value="+o+"]").prop("selected","true").trigger("change"),$(r.upsale).selectpicker("refresh"),$(r.upsaleFixed+" [value="+t+"]").prop("selected","true").trigger("change"),$(r.upsaleFixed).selectpicker("refresh"),new PNotify({title:LandingCore.t("Успех"),text:LandingCore.t("Шанс дропа для выбранного товара увеличен!"),icon:"",type:"success",delay:8e3}))}}),$(window).on("resize",function(){i($(window).width())}),i($(window).width()),numeral.register("locale","ru",{delimiters:{thousands:" ",decimal:"."}}),numeral.locale("ru"),m.on("price-updated",function(){var t=numeral(e.prices.newPrice).format("0,0")+" "+LandingCore.plural(e.prices.newPrice,[LandingCore.t("рубль"),LandingCore.t("рубля"),LandingCore.t("рублей")]),o=numeral(e.prices.newBonusPrice).format("0,0")+" "+LandingCore.plural(e.prices.newBonusPrice,[LandingCore.t("бонус"),LandingCore.t("бонуса"),LandingCore.t("бонусов")]),n=$(r.upsalesAddedSum);$("#play").text(LandingCore.t("Купить кейс за {price}",{price:t})),$(r.playBonuses).text(LandingCore.t("Купить кейс за {bonus}",{bonus:o}));var i={RUB:[LandingCore.t("рубль"),LandingCore.t("рубля"),LandingCore.t("рублей")],PPB:[LandingCore.t("бонус"),LandingCore.t("бонуса"),LandingCore.t("бонусов")]};if(e.prices.addedPrice||e.prices.addedBonus){var a=0;a=e.prices.addedPrice,n.text(LandingCore.t("+{sum} {currency}",{sum:a,currency:LandingCore.plural(a,i.RUB)}))}else n.text("+0 "+LandingCore.plural(0,i.RUB))});var f={newPrice:function(t){e.prices.newPrice=t},newBonusPrice:function(t){e.prices.newBonusPrice=t},promoPrice:function(t){e.prices.promoPrice=t},promoBonusPrice:function(t){e.prices.promoBonusPrice=t},addedPrice:function(t){e.prices.addedPrice=t},addedBonus:function(t){e.prices.addedBonus=t}},y=function(e,t){t?(e.selectpicker("val",""),e.attr("disabled","disabled"),e.prop("disabled",!0)):(e.removeAttr("disabled"),e.prop("disabled",!1)),e.selectpicker("refresh")},v=function(){var e=!1;$(r.upsale).find(":selected").each(function(){$(this).data("fixed-item")&&(e=!0)}),e?($(r.upsaleFixed).removeAttr("disabled"),$(r.upsaleFixed).prop("disabled",!1)):($(r.upsaleFixed).selectpicker("val",""),$(r.upsaleFixed).attr("disabled","disabled"),$(r.upsaleFixed).prop("disabled",!0)),$(r.upsaleFixed).selectpicker("refresh")},g=function(){var t=$(r.upsalePercents),o=$(r.upsale),n=t.val(),i=o.val(),a=null==i||!i.length,s=C();if(a)return f.newPrice(s[0]),f.newBonusPrice(s[1]),f.addedPrice(0),f.addedBonus(0),m.trigger("price-updated"),!1;for(var l=s[0],c=0,d=null,u=0;u<i.length;u++){d=e.upsales[i[u]];var p=parseInt(d["value_"+n]),h=d["incr_type_"+n];"fix"==h?c+=Math.ceil(p):"percent"==h&&(c+=Math.ceil(l/100*p))}var y=c+l,v=y*e.prices.bonusCourse;f.newPrice(y),f.newBonusPrice(v),f.addedPrice(y-s[0]),f.addedBonus(v-s[1]),m.trigger("price-updated")},C=function(){return e.prices.promoPrice?[parseInt(e.prices.promoPrice),parseInt(e.prices.promoBonusPrice)]:[parseInt(e.prices.basePrice),parseInt(e.prices.baseBonusPrice)]},b=null,w={tickIcon:"",noneSelectedText:LandingCore.t("Ничего не выбрано")};$(r.upsale).selectpicker(w),$(r.upsalePercents).selectpicker(),$(r.upsaleFixed).selectpicker(w),m.on("change",r.upsalePercents+","+r.upsale,function(t){var o=$(r.upsalePercents),n=$(r.upsale);$(r.upsaleFixed);$(this).is(o)&&null===b&&n.val(n.find("option").eq(0).val());var i=o.val();n.val();b=i,v(),-1==i?(b=null,y(n,!0),v()):(y(n,!1),e.deselectUpsales&&(n.selectpicker("deselectAll"),e.deselectUpsales=!1)),g()}).on("click",r.caseResetPromo,function(e){e.preventDefault(),$(this).closest("div").find("input").val(""),f.promoPrice(0),f.promoBonusPrice(0),g(),$(r.promoCodeButton).trigger("click")}),m.on("change",$(r.upsale),a)};!function(){for(var e=0,t=["ms","moz","webkit","o"],o=0;o<t.length&&!window.requestAnimationFrame;++o)window.requestAnimationFrame=window[t[o]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[o]+"CancelAnimationFrame"]||window[t[o]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,o){var n=(new Date).getTime(),i=Math.max(0,16-(n-e)),a=window.setTimeout(function(){t(n+i)},i);return e=n+i,a}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}();var LandingExperience=function(e){var t=$.extend(!0,{levelInfo:null,previousLevelInfo:null},e),o=function(){function e(e,t){this.setOptions(t),this.interval=null,this.$context=$(e),this.circle=new ProgressBar.Circle(this.$context.find(".wrapper").get(0),{color:"#8634ff",strokeWidth:2.1,value:.2}),this.$knob=this.$context.find(".knob"),this.$congratz=this.$context.find(".congratz"),this.$progress=this.$context.find(".progress"),this.ctx=this.$progress.get(0).getContext("2d"),this.centerX=this.$progress.width()/2,this.centerY=this.$progress.height()/2,this.canvasSize=this.$progress.width(),this.draw(),this.circle.set(this.options.currentVal/100)}return e.prototype.setOptions=function(e){if("object"!==(void 0===e?"undefined":_typeof(e)))throw new Error("Options should be an object");this.options=e||{},this.options.time=0,this.options.target=0,this.options.steps=100,this.options.radius=150,this.options.maxDiff=150,this.options.constraint=360,this.options.currentVal=100/e.maxExp*e.currentExp,this.options.usedExperience=0},e.prototype.getTimeDiff=function(){var e=this.options.time,t=(new Date).getTime(),o=t-(e||t);return this.options.time=t,o},e.prototype.setOption=function(e,t){this.options[e]=t},e.prototype.getOption=function(e){return this.options[e]},e.prototype.isSameLevel=function(){return this.options.currentExp<this.options.maxExp},e.prototype.getCurrentVal=function(){return Math.ceil(100/this.options.maxExp*this.options.currentExp)},e.prototype.calculateCurrentVal=function(){this.options.currentVal=this.getCurrentVal()},e.prototype.addExperience=function(e){var t=this.options.currentExp+e;t<=this.options.maxExp&&(this.options.currentExp=t,this.calculateCurrentVal())},e.prototype.paintNewPath=function(e,t){e=e||"#000",t=t||"#000",this.circle.path.setAttribute("id","circle-1");var o=document.getElementById("circle-1"),n=o.cloneNode(!0);n.id="circle-2",this.circle.svg.appendChild(n),this.circle.animate(1,{duration:1200,easing:"easeInOut",from:{color:e},to:{color:t},step:function(e,t,o){t.path.setAttribute("stroke",e.color)}})},e.prototype.updateOutput=function(e,t,o){var n="";n=0==o?'<span class="exp-current" data-toggle="tooltip" title="'+LandingCore.t("Ваш опыт на текущем уровне")+'">'+e+'</span>/<span class="exp-to-reach" data-toggle="tooltip" title="'+LandingCore.t("Необходимо опыта для перехода на следующий уровень")+'">'+t+"</span>":" + "+e+"/"+t,n+=LandingCore.t('<span class="title">текущий уровень</span>'),$(".exp").html(n)},e.prototype.updateCircle=function(e){this.addExperience(e),this.draw(),this.circle.set(this.options.currentVal/100)},e.prototype.calculateExpToAdd=function(e){return e>0&&e<=100?10:e>100&&e<=1e3?20:100},e.prototype.animate=function(e,t){var o=this.getOption("maxExp")-this.getOption("currentExp");if(e.currentExp>o){var n=this,i=o;this.options.usedExperience+=o}else var n=this,i=e.currentExp-this.options.usedExperience;return expToAdd=this.calculateExpToAdd(i),this.updateOutput(i,this.getOption("maxExp"),t),function t(){return i?(i=n.options.currentExp===n.options.maxExp?0:i-expToAdd,n.updateCircle(expToAdd),requestAnimationFrame(t)):n.isSameLevel()?n.paintNewPath("#000","#392f44"):n.updateNewLevel(e)}},e.prototype.updateNewLevel=function(e){e.currentExp;this.setOption("level",e.level),this.setOption("maxExp",e.maxExp),this.setOption("currentExp",0),this.circle.set(0),this.setOption("currentVal",0),this.draw(),this.updateOutput(),this.animate(e)()},e.prototype.draw=function(){var e,t,o;for(this.$progress.get(0).height=this.canvasSize,this.$progress.get(0).width=this.canvasSize,this.ctx.save(),this.ctx.translate(this.centerX,this.centerY),this.ctx.rotate(Math.PI/180*-90-2*Math.PI/this.options.steps),e=t=0,o=this.options.steps-1;t<=o;e=t+=1)this.ctx.beginPath(),this.ctx.rotate(2*Math.PI/this.options.steps),this.ctx.lineWidth=3,this.ctx.lineTo(100,0),this.ctx.lineTo(110,0),e<=Math.floor(this.options.currentVal)?(this.ctx.shadowBlur=10,this.ctx.strokeStyle="#8634ff",this.ctx.shadowColor="#8634ff",e>.75*this.options.steps&&this.options.currentVal>.75*this.options.steps&&(this.ctx.strokeStyle="#5300cd",
this.ctx.shadowColor="#5300cd"),e>.88*this.options.steps&&this.options.currentVal>.88*this.options.steps&&(this.ctx.strokeStyle="#4900b4",this.ctx.shadowColor="#4900b4"),e===this.options.currentVal&&(this.ctx.strokeStyle="#fff",this.ctx.shadowColor="#fff",this.ctx.lineTo(120,0))):(this.ctx.strokeStyle="#333",this.ctx.shadowBlur=0,this.ctx.shadowColor="#fff"),this.ctx.stroke();this.ctx.restore()},e}(),n=t.levelInfo.currentLevel==t.previousLevelInfo.currentLevel,i=t.levelInfo.currentLevelExp==t.previousLevelInfo.currentLevelExp;if(null!=t.previousLevelInfo&&0==t.previousLevelInfo.length||n&&i){var a=t.levelInfo.currentLevelMaxExp;a!=t.levelInfo.currentLevelExp&&a-t.levelInfo.currentLevelMin>t.levelInfo.currentLevelExp&&(a-=t.levelInfo.currentLevelMin);var r=new o(".dial-experience",{level:t.levelInfo.currentLevel,currentExp:t.levelInfo.currentLevelExp,maxExp:a});r.updateOutput(r.options.currentExp,r.options.maxExp,!1)}else if(n&&!i){var s=new o(".dial-experience",{level:t.previousLevelInfo.currentLevel,currentExp:t.previousLevelInfo.currentLevelExp,maxExp:t.previousLevelInfo.currentLevelMin});s.updateOutput(s.options.currentExp,s.options.maxExp,!1);var l={level:t.levelInfo.currentLevel,currentExp:t.levelInfo.currentLevelExp-t.previousLevelInfo.currentLevelExp,maxExp:t.levelInfo.currentLevelMin};setTimeout(function(){s.animate(l,!0)()},1e3)}else{var s=new o(".dial-experience",{level:t.previousLevelInfo.currentLevel,currentExp:t.previousLevelInfo.currentLevelExp,maxExp:t.previousLevelInfo.currentLevelMin});s.updateOutput(s.options.currentExp,s.options.maxExp,!1);var l={level:t.levelInfo.currentLevel,currentExp:t.previousLevelInfo.currentLevelMaxExp-t.previousLevelInfo.currentLevelExp+t.levelInfo.currentLevelExp,maxExp:t.levelInfo.currentLevelMin};setTimeout(function(){s.animate(l,!0)()},1e3)}},LandingIndexPage=function(e){var t=$.extend(!0,{dates:[]},e);for(var o in t.dates)null!=t.dates[o]&&$(".eTimer-"+o).eTimer({etType:0,etDate:t.dates[o],etTitleText:"",etTitleSize:5,etShowSign:1,etSep:":",etFontFamily:"",etTextColor:"#a3a3a3",etPaddingTB:0,etPaddingLR:0,etBackground:"transparent",etBorderSize:0,etBorderRadius:0,etBorderColor:"white",etShadow:" 0px 0px 0px 0px #333333",etLastUnit:4,etNumberFontFamily:"Impact",etNumberSize:22,etNumberColor:"black",etNumberPaddingTB:6,etNumberPaddingLR:4,etNumberBackground:"white",etNumberBorderSize:0,etNumberBorderRadius:3,etNumberBorderColor:"white",etNumberShadow:"inset 0px 0px 10px 0px rgba(0, 0, 0, 0.5)"})},LandingInventory=function(e){e=$.extend(!0,{itemStatuses:[],itemTypes:[],payTypes:[],errorMessage:null,caseUrl:null,hoursBeforeCancelOffer:0,preview:"",openCaseBtn:"",sendAssetBtn:"",openKeyBtn:"",sendAssetUrl:"",openKeyUrl:"",tryFindPrizeUrl:"",balanceUrl:"",rubToActivate:"",isUserActive:!0,resaleBtn:"",resaleUrl:""},e),e=$.extend(!0,{swalAsset:{options:{title:LandingCore.t("Вы уверены?"),html:LandingCore.t('Предмет будет отправлен на вывод в ваш Steam-аккаунт. <p style="color: #ff1e00"><br>{cancelOfferInfo}</p>',{cancelOfferInfo:LandingCore.t("Обратите внимание. Если вы не примете предмет в стиме в течение {hours}, вывод будет автоматически отменен.",{hours:e.hoursBeforeCancelOffer+" "+LandingCore.plural(e.hoursBeforeCancelOffer,[LandingCore.t("часа"),LandingCore.t("часов"),LandingCore.t("часов")])})}),type:"question",confirmButtonText:LandingCore.t("Да, я уверен!"),cancelButtonText:LandingCore.t("Нет, я передумал...")},inactiveUser:{title:"",html:'<span class="account-activation-text">'+LandingCore.t("Необходима активация аккаунта")+'</span><div class="alert alert-danger text-justify">'+LandingCore.t("Для доступа к полному функционалу сайта пополните баланс на сумму <strong>от {amountRub}</strong>. Пополнив свой баланс, вы сможете выводить все предметы, в том числе и полученные в наших бесплатных розыгрышах.",{amountRub:e.rubToActivate})+"</div>",type:"warning"},successParams:[LandingCore.t("Успех!"),LandingCore.t("Предмет был отправлен на ваш Steam-аккаунт, подтвердите прием предмета в Steam."),"success"],cancelParams:[LandingCore.t("Действие отменено"),LandingCore.t("Вы сможете вывести свой предмет в любое удобное для вас время."),"error"],errorParams:[LandingCore.t("Ой!"),LandingCore.t("К сожалениею произошла ошибка при попытке вывести предмет. Попробуйте, пожалуйста, позже."),"error"]},swalKey:{options:{title:LandingCore.t("Вы уверены?"),text:LandingCore.t("После получения ключа данная игра пропадет из вашего инвентаря (будет считаться использованной)."),type:"question",confirmButtonText:LandingCore.t("Да, я уверен!"),cancelButtonText:LandingCore.t("Нет, я передумал...")},successParams:[LandingCore.t("Получение ключа"),LandingCore.t("Ваш ключ: <b>%s</b> <br> Сохраните ключ перед закрытием этого окна."),"success"],cancelParams:[LandingCore.t("Действие отменено"),LandingCore.t("Вы сможете получить свой ключ в любое удобное для вас время."),"error"],errorParams:[LandingCore.t("Ой!"),LandingCore.t("К сожалениею произошла ошибка при попытке открыть ключ. Попробуйте, пожалуйста, позже."),"error"]}},e);var t={openCaseBtn:"#open-case-btn",steamBtn:".steam-button",keyBtn:".key-button",filterBlockHidden:".filter-block-hidden",filtersForm:"#inventory-filter-form",selectAllSwitcher:".filter-form .switch input",inventoryButtons:".inventory-buttons",inventoryItem:".inventory-item",inventoryFilters:"#inventory-filters",inventoryList:"#inventory-list",clearInventoryFilters:"#clearInventoryFilters",activeInventoryItem:".inventory-item.active"},o={tryFindPrize:!1};$(t.inventoryFilters).on("pjax:end",function(e){e.preventDefault(),$.pjax.reload({container:t.inventoryList}),initRangeSelect(),matchHeight()}),$("body").on("click",".more-filters",function(e){$(t.filterBlockHidden).slideToggle("slow")}).on("click",t.inventoryItem,function(o){if($(t.inventoryItem).removeClass("active"),!e.preview){$(t.inventoryButtons).empty();var n=$(this).attr("data-type"),i=$(this).attr("data-id"),a=$(this).attr("data-status"),r=$(this).attr("data-tradable"),s=$(this).attr("data-pay-type");if(n==e.itemTypes.case){var l=e.caseUrl.replace(/%s/,i),c=$(e.openCaseBtn).attr({href:l,"data-status":a,"data-id":i});$(t.inventoryButtons).append(c)}else n==e.itemTypes.asset&&a==e.itemStatuses.assetNew&&"hold"!=r?$(t.inventoryButtons).append(e.sendAssetBtn):n==e.itemTypes.key&&$(t.inventoryButtons).append(e.openKeyBtn);if(s==e.payTypes.money&&(n==e.itemTypes.asset||n==e.itemTypes.key)){var d=e.resaleUrl.replace(/%s/,i),u=$(e.resaleBtn).attr({href:d,"data-id":i});$(t.inventoryButtons).append(u)}}$(this).toggleClass("active")}).on("click",t.openCaseBtn,function(t){t.preventDefault();var n=$(this).attr("data-status"),i=$(this).attr("data-id"),a=$(this).attr("href");if(n==e.itemStatuses.caseError)return!o.tryFindPrize&&(o.tryFindPrize=!0,$.ajax({url:e.tryFindPrizeUrl,data:{_csrf:LandingCore.getCsrfToken(),itemId:i},format:"json",method:"POST",success:function(e){if("error"==e.status)new PNotify({title:LandingCore.t("Ошибка"),text:e.msg,icon:"",type:"error",delay:4e3});else{var t=window.location.origin;window.location.href=t+a}o.tryFindPrize=!1},error:function(){o.tryFindPrize=!1}}),!1);var r=window.location.origin;window.location.href=r+a}).on("click",t.clearInventoryFilters,function(e){var o=window.location.pathname;history.replaceState(null,null,o),$.get(o,function(e){$(t.inventoryList).html($(e).find(t.inventoryList).html()),$(t.filtersForm).html($(e).find(t.filtersForm).html()),initRangeSelect()})}).on("change",t.selectAllSwitcher,function(e){$(this).prop("checked")?$(t.inventoryItem).addClass("active"):$(t.inventoryItem).removeClass("active")}).on("click","#pagenav a",function(e){$(t.inventoryList).on("pjax:end",function(e){e.preventDefault(),$(t.selectAllSwitcher).prop("checked")?$(t.inventoryItem).addClass("active"):$(t.inventoryItem).removeClass("active")})}).on("change",t.filtersForm+" select, #inventorysearch-name",function(e){$(this).closest("form").submit()}).on("slideStop","#ex1Slider",function(e){$(this).closest("form").submit()}),SendAsset(e,t),OpenKey(e,t)},SendAsset=function(e,t){var o={showCancelButton:!0,allowOutsideClick:!1,showLoaderOnConfirm:!0},n={};e.isUserActive?n=e.swalAsset.options:(n=e.swalAsset.inactiveUser,o.showCancelButton=!1,o.confirmButtonText=LandingCore.t("Пополнить баланс и снять ограничение"),o.confirmButtonColor="#2cb868"),o=$.extend(!0,o,n),$("body").on("click",t.steamBtn,function(n){n.preventDefault();var i=$(t.activeInventoryItem),a=i.data("id");e.isUserActive?o.preConfirm=function(){return new Promise(function(t,o){$.ajax({url:e.sendAssetUrl,data:{_csrf:LandingCore.getCsrfToken(),itemId:a},format:"json",method:"POST",success:function(e){if("error"==e.status)return o(e.msg),!1;t()},error:function(){swal.apply(null,e.swalAsset.errorParams)}})})}:o.preConfirm=function(){return new Promise(function(t,o){window.location.href=e.balanceUrl})},swal(o).then(function(t){swal.apply(null,e.swalAsset.successParams)},function(t){"cancel"===t&&swal.apply(null,e.swalAsset.cancelParams)})})},OpenKey=function(e,t){var o={showCancelButton:!0,allowOutsideClick:!1,showLoaderOnConfirm:!0},n=e.swalKey.successParams[1];o=$.extend(!0,o,e.swalKey.options),$("body").on("click",t.keyBtn,function(i){i.preventDefault();var a=$(t.activeInventoryItem),r=a.data("id");o.preConfirm=function(){return new Promise(function(t,o){$.ajax({url:e.openKeyUrl,data:{_csrf:LandingCore.getCsrfToken(),itemId:r},format:"json",method:"POST",success:function(e){if("error"==e.status)return o(e.msg),!1;t(e)},error:function(){swal.apply(null,e.swalKey.errorParams)}})})},swal(o).then(function(t){var o=n;e.swalKey.successParams[1]=o.replace(/%s/,t.msg),swal.apply(null,e.swalKey.successParams)},function(t){"cancel"===t&&swal.apply(null,e.swalKey.cancelParams)})})},LandingLiveSaleItems=function(e){function t(e){var t=JSON.parse(e),o='<div class="small-gun-item"><div class="small-gun-img"><img src="'+t.itemImage+'" alt="item"></div><h6>'+t.itemName+"</h6><p>"+t.username+"</p></div>";$(".small-guns-wrap").prepend(o),$(".small-guns-wrap .small-gun-item").last().remove();for(var n=$(" .small-gun-item"),i=0;i<n.length;i++)i>3&&$(n[i]).addClass("hidden-xs")}e=$.extend(!0,{channel:null},e),LandingCore.getSocketConnection(e.channel,{reconnection:!0,reconnectionDelay:2e3,reconnectionDelayMax:1e4,reconnectionAttempts:1,timeout:5e3}).on("response",function(o,n){if(n!=e.channel)return!1;t(o)})},LandingLotteryPage=function(e){var t=$.extend(!0,{participatingUrl:"",promoCodeCheckUrl:"",endDate:"",promotionalCodeType:"",promotionalCodeSubType:""},e),o={checkInLottery:".check-in-lottery",lotteryBlock:".lottery-block",lotteryMsg:".lottery-msg",lotteryBtnBlock:".lottery-btn-block",checkPromoCode:"#promo-code-hash-check",valuePromoCode:"#promo-code-hash"},n={tryParticipate:!1},i={canParticipate:!1};$("body").on("click",o.checkInLottery,function(e){if(e.preventDefault(),n.tryParticipate)return!1;var a=$(this).closest(o.lotteryBlock),r=a.find(o.lotteryMsg),s=a.find(o.checkInLottery),l=$(this).data("lottery-id"),c=$(this).data("token");""!=t.participatingUrl?t.promotionalCodeType&&!i.canParticipate?new PNotify({title:LandingCore.t("Ошибка"),text:LandingCore.t("Для участия в этом розыгрыше необходим промокод"),icon:"",type:"error",delay:8e3}):(n.tryParticipate=!0,$.ajax({url:t.participatingUrl,method:"POST",dataType:"json",data:{_csrf:LandingCore.getCsrfToken(),lotteryId:l,token:c,promoCodeId:$(this).attr("data-promo-code-id")},beforeSend:function(){r.text("")},success:function(e){if("ok"==e.status){a.find(o.lotteryBtnBlock).html(LandingCore.t("Вы приняли участие в розыгрыше")),s.remove();var t=$(".users-counter").text();$(".users-counter").text(++t),new PNotify({title:LandingCore.t("Поздравляем"),text:LandingCore.t("Теперь вы принимаете участие в розыгрыше!"),icon:"",type:"success",delay:8e3})}else new PNotify({title:LandingCore.t("Ошибка"),text:e.msg,icon:"",type:"error",delay:8e3});n.tryParticipate=!1},error:function(){n.tryParticipate=!1}})):(new PNotify({title:LandingCore.t("Ошибка"),text:LandingCore.t('Для участия в розыгрыше Вы должны <a data-scroll="" href="#navbar">авторизоваться</a>'),icon:"",type:"error",delay:8e3}),n.tryParticipate=!1)}).on("click",o.checkPromoCode,function(e){e.preventDefault(),""!=t.promoCodeCheckUrl&&""!=$(o.valuePromoCode).val()?$.ajax({url:t.promoCodeCheckUrl,method:"POST",dataType:"json",data:{_csrf:LandingCore.getCsrfToken(),hash:$(o.valuePromoCode).val(),promotionalCodeType:t.promotionalCodeType,promotionalCodeSubType:t.promotionalCodeSubType,data:{lottery:$(o.checkInLottery).data("sample-lottery-id")}},success:function(e){"ok"==e.status?(i.canParticipate=!0,$(o.checkInLottery).removeClass("disabled"),$(o.checkInLottery).attr("data-promo-code-id",e.promoCodeId)):new PNotify({title:LandingCore.t("Ошибка"),text:e.msg,icon:"",type:"error",delay:8e3})}}):new PNotify({title:LandingCore.t("Ошибка"),text:LandingCore.t("Для участия в этом розыгрыше необходим промокод"),icon:"",type:"error",delay:8e3})}),$(".eTimer-lottery").eTimer({etType:0,etDate:t.endDate,etTitleText:"",etTitleSize:10,etShowSign:1,etSep:":",etFontFamily:"",etTextColor:"#a3a3a3",etPaddingTB:0,etPaddingLR:0,etBackground:"transparent",etBorderSize:0,etBorderRadius:0,etBorderColor:"white",etShadow:" 0px 0px 0px 0px #333333",etLastUnit:4,etNumberFontFamily:"Impact",etNumberSize:57,etNumberColor:"black",etNumberPaddingTB:7,etNumberPaddingLR:15,etNumberBackground:"white",etNumberBorderSize:0,etNumberBorderRadius:3,etNumberBorderColor:"white",etNumberShadow:"inset 0px 0px 10px 0px rgba(0, 0, 0, 0.5)"})},LandingPromoCodeCase=function(e){e=$.extend(!0,{balance:[],balancePage:"",buyAction:"",openUrl:"",promoCodeCheckUrl:"",promotionalCodeType:"",promotionalCodeSubType:"",promoCodeSubTypes:[]},e);var t={payType:"#pay-type",noRefer:".no-refer",openCaseDescr:".open-case-descr",promoCodeMessage:".promo-code-message",buyWithPromoCode:"#buy-with-promo-code",valuePromoCode:"#promo-code-hash",promoCodeBlock:".promo-code-block",gamesItem:".games-item",openCaseButton:"#open-case-button",buyWithoutRoulette:".buy-without-roulette"},o={buyAction:!1,dataPromoCodeId:null};$("body").on("click",".promocode-games-item",function(e){$(e.target).is("input")&&e.preventDefault()}).on("click",t.buyWithPromoCode,function(n){n.preventDefault(),n.stopPropagation();var i=$(this),a=i.attr("data-case-id"),r=i.closest(t.gamesItem),s=r.find(t.valuePromoCode).val(),l=i.data("games-promo-box"),c=l?i.data("currency"):null;if(""!=e.promoCodeCheckUrl&&""!=$.trim(s)){if(o.buyAction)return!1;o.buyAction=!0;var d=$.Deferred();$.ajax({url:e.promoCodeCheckUrl,method:"POST",dataType:"json",data:{_csrf:LandingCore.getCsrfToken(),hash:s,promotionalCodeType:e.promotionalCodeType,promotionalCodeSubType:e.promotionalCodeSubType,data:{case_id:a}},success:function(e){"ok"==e.status?(o.dataPromoCodeId=e.promoCodeId,r.find(t.payType+" option:nth-child(1)").text(e.fullPrice),r.find(t.payType+" option:nth-child(2)").text(e.bonusPrice),d.resolve(!0)):(o.buyAction=!1,d.resolve(!1),new PNotify({title:LandingCore.t("Ошибка"),text:e.msg,icon:"",type:"error",delay:8e3}))},error:function(e,t,n){o.buyAction=!1,d.resolve(!1),new PNotify({title:"Error",text:"Something went wrong",icon:"",type:"success",delay:8e3})}}),d.then(function(n){if(!n)return!1;var a=l?c:r.find(t.payType).val(),s={caseSlug:i.data("case-slug"),_csrf:LandingCore.getCsrfToken(),promoCodeId:o.dataPromoCodeId},d=e.buyAction;s.buyType="buy",s.payType=a,$.ajax({url:d,dataType:"json",method:"POST",data:s,success:function(t){if("ok"!=t.status)return new PNotify({title:LandingCore.t("Сообщение"),text:t.msg,icon:"",type:"success",delay:8e3}),o.buyAction=!1,!1;o.buyAction=!1;var n=window.location.origin,i=e.openUrl.replace(/%s/,t.id);$(location).attr("href",n+i)},error:function(e,t,n){o.buyAction=!1,new PNotify({title:"Error",text:"Something went wrong",icon:"",type:"success",delay:8e3})}})})}else new PNotify({title:LandingCore.t("Ошибка"),text:LandingCore.t("Для покупки этого кейса необходим промокод"),icon:"",type:"error",delay:8e3})}).on("click",t.noRefer,function(e){return e.preventDefault(),!1}),$(t.buyWithoutRoulette).on("click",function(t){if(t.preventDefault(),o.buyAction)return!1;o.buyAction=!0;var n=$(this).data("currency"),i={caseSlug:$(this).attr("data-case-slug"),_csrf:LandingCore.getCsrfToken()},a=e.buyAction;i.buyType="buy",i.payType=n,$.ajax({url:a,dataType:"json",method:"POST",data:i,success:function(t){if("ok"!=t.status)return new PNotify({title:LandingCore.t("Сообщение"),text:t.msg,icon:"",type:"success",delay:8e3}),o.buyAction=!1,!1;o.buyAction=!1;var n=window.location.origin,i=e.openUrl.replace(/%s/,t.id);$(location).attr("href",n+i)},error:function(e,t,n){o.buyAction=!1,new PNotify({title:"Error",text:"Something went wrong",icon:"",type:"success",delay:8e3})}})})},LandingPromoCodeGiftPromo=function(e){e=$.extend(!0,{buyAction:"",openUrl:"",promoCodeCheckUrl:"",promotionalCodeType:"",promotionalCodeSubType:"",promoCodeSubTypes:[]},e);var t={openCaseDescr:".open-case-descr",buyWithPromoCode:"#buy-with-promo-code",valuePromoCode:"#promo-code-hash",promoCodeBlock:".promo-code-block",openCaseButton:"#open-case-button"},o={buyAction:!1,dataPromoCodeId:null,caseInfo:null};$("body").on("click",t.buyWithPromoCode,function(n){if(n.preventDefault(),""!=e.promoCodeCheckUrl&&""!=$(t.valuePromoCode).val()){if(o.buyAction)return!1;o.buyAction=!0;var i=$.Deferred();$.ajax({url:e.promoCodeCheckUrl,method:"POST",dataType:"json",data:{_csrf:LandingCore.getCsrfToken(),hash:$(t.valuePromoCode).val(),promotionalCodeType:e.promotionalCodeType,promotionalCodeSubType:e.promotionalCodeSubType},success:function(e){"ok"==e.status?(o.dataPromoCodeId=e.promoCodeId,o.caseInfo=e.caseInfo,i.resolve(!0)):(i.resolve(!1),o.buyAction=!1,new PNotify({title:LandingCore.t("Ошибка"),text:e.msg,icon:"",type:"error",delay:8e3}))},error:function(e,t,n){o.buyAction=!1,i.resolve(!1),new PNotify({title:"Error",text:"Something went wrong",icon:"",type:"success",delay:8e3})}}),i.then(function(t){if(!t)return!1;var n={caseSlug:o.caseInfo.slug,_csrf:LandingCore.getCsrfToken(),promoCodeId:o.dataPromoCodeId},i=e.buyAction;n.buyType="buy",n.payType="RUB",$.ajax({url:i,dataType:"json",method:"POST",data:n,success:function(t){if("ok"!=t.status)return new PNotify({title:LandingCore.t("Сообщение"),text:t.msg,icon:"",type:"success",delay:8e3}),o.buyAction=!1,!1;if(o.buyAction=!1,void 0!==t.id){var n=window.location.origin,i=e.openUrl.replace(/%s/,t.id);$(location).attr("href",n+i)}},error:function(e,t,n){o.buyAction=!1,new PNotify({title:"Error",text:"Something went wrong",icon:"",type:"success",delay:8e3})}})})}else new PNotify({title:LandingCore.t("Ошибка"),text:LandingCore.t("Для получения бесплатного товара или кейса необходим промокод"),icon:"",type:"error",delay:8e3})})},ResaleItem=function(e){var t=$.extend(!0,{ppbCourse:"",resaleUrl:null,objectNetCost:0},e),o={resaleBtn:"#resale-btn",inventoryItem:".inventory-item"},n={options:{title:LandingCore.t("Вы уверены?"),html:"",type:"question",confirmButtonText:LandingCore.t("Да, я уверен!"),cancelButtonText:LandingCore.t("Нет, я передумал..."),showCancelButton:!0,allowOutsideClick:!1,showLoaderOnConfirm:!0},cancelParams:[LandingCore.t("Действие отменено"),LandingCore.t("Вы сможете продать свой предмет в любое удобное для вас время."),"error"]};$("body").on("click",o.resaleBtn,function(e){e.preventDefault();var i=$(this).data("id"),a=$(o.inventoryItem+'[data-id="'+i+'"]'),r=a.data("net-cost")||t.objectNetCost,s=$(this).attr("href"),l=parseFloat(String(r).replace(/(\.\d).*/,"$10"))*t.ppbCourse,c=l+" "+LandingCore.plural(l,[LandingCore.t("бонус"),LandingCore.t("бонуса"),LandingCore.t("бонусов")]);n.options.html=LandingCore.t("Вы уверены, что хотите продать этот предмет за <strong>{amountBonus}</strong>?",{amountBonus:c}),n.options.preConfirm=function(){return new Promise(function(e,t){$.post(s,{_csrf:LandingCore.getCsrfToken()},function(t){e(t)})},"json")},swal(n.options).then(function(e){if("error"==e.status){var t=[LandingCore.t("Упс..."),e.msg,"error"];swal.apply(null,t)}else"ok"==e.status&&void 0!==e.returnUrl&&(window.location.href=e.returnUrl)},function(e){"cancel"===e&&swal.apply(null,n.cancelParams)})})};$(function(){function e(e){e=e||$(".games-row"),e.each(function(){var e=$(this),t=0,o=$(this).hasClass("all-in-items");$(this).find("img").one("load",function(){t++,o?5==t&&($(e).find(".all-in-item .case-box-wrap").matchHeight(),t=0):4==t&&($(e).find(".case-box-item, .case-item").matchHeight(),$(e).find(".top-case-img.case-img").matchHeight(),$(e).find(".games-item .case-descr").matchHeight(),t=0)}).each(function(){this.complete&&$(this).load()})})}$("img, a").on("dragstart",function(e){e.preventDefault()}),e();var t=!1;$("#user-register").on("beforeSubmit",function(){if(!t){return $(this).find(":submit").prop("disabled",!0),t=!0,!0}return!1}),matchHeight(),new SmoothScroll("[data-scroll]"),$(".menu-button").click(function(){$(".main-menu-toggle").toggleClass("on"),$(".main-menu").fadeToggle("slow")}),$(".sale-slider").owlCarousel({loop:!0,margin:0,nav:!0,autoplay:!0,items:1,navText:["",""],dots:!1}),$(".games-item, .all-in-item").hover(function(){$(this).addClass("hover")},function(){$(this).removeClass("hover")}),$(".show-hidden-cases").click(function(t){var o=($(this).attr("href"),$(this).closest(".games-row").find(".cases-hide"));o.find(".case-box-item").css("display","inline-block"),o.show(),$(this).remove(),e($(this).closest(".games-row"))}),$(".case-box-item  img").hover(function(){if(!$(this).hasClass("image-case")){$(".case-box-item  a").tooltip("hide")}}),$('[data-toggle="popover"]').popover({html:!0,trigger:"hover",placement:"top"});var o=$(".games.combo-boxes");o.find('a[data-toggle="tab"]').on("shown.bs.tab",function(e){var t=$(this).attr("href");$(t).css("left","-"+$(window).width()+"px");var o=$(t).offset().left;$(t).css({left:o}).animate({left:"0px"},"10")}),o.find(".arrow").on("click",function(){if($(this).hasClass("arrow-left")||$(this).hasClass("arrow-left-small")){var e=$(".block-buttons li.active").prev().find("a");e.length>=1?$(e).click():(e=$(".block-buttons li").last().find("a"),$(e).click())}else if($(this).hasClass("arrow-right")||$(this).hasClass("arrow-right-small")){var t=$(".block-buttons li.active").next().find("a");t.length>=1?$(t).click():(t=$(".block-buttons li").first().find("a"),$(t).click())}}),initKnobDial(),initRangeSelect(),initExperienceDial()});